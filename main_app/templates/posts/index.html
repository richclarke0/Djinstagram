{% extends 'base.html' %} 

{% block content %} 

{% for post in posts %}

    <div class="post">
      <div class="post-header">
        <p><i class="fa-regular fa-circle-user"></i>&nbsp;</p>
        <a style= "text-decoration: none; color: black "href="{% url 'profile_detail' pk=user.id %}">
        <p>{{ post.user.username }}</p>
      </a>
      </div>

      <div class="post-img">
        <img src="{{ post.photo_url }}" alt="" />
      </div>

      <form action="{% url 'like_post' %}" method= 'POST' class='ui form'>

      {% csrf_token %}
        <input type='hidden' name='post_id' value="{{ post.id }}">
        {% if user not in post.liked.all %}
          <button class="ui button positive" type="submit"> Like</button>
          {%else%}
          <button class="ui button negative" type="submit"> Unlike</button>
          {%endif%}
      </form>
      <strong> {{ post.liked.all.count }} likes </strong> 
      



      <div class="post-likes">
        <div class="post-heart">
          <i class="fa-regular fa-heart"></i>
          <i class="fa-solid fa-heart"></i>
        </div>
        <div class="post-likes-counter">123 likes</div>
      </div>

      <div class="post-description">
        <div class="post-author">
          <a style= "text-decoration: none; color: black "href="{% url 'profile_detail' pk=user.id %}">
            <p>@{{ post.user.username }}:</p>
            <i class="fa-solid fa-user" id="touch"></i>
        </a>
        </div>
        <div class="post-description-text">
          <p>{{ post.caption }}</p>
        </div>
      </div>
    </div>

    <hr />
{% endfor %} 

{% endblock %}
