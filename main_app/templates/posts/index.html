{% extends 'base.html' %} 

{% block content %} 


{% if user.is_authenticated %}


{% for post in posts %}

    <div class="post">
      <div class="post-header">
        <p><i class="fa-regular fa-circle-user"></i>&nbsp;</p>
        <a class="index-username" href="{% url 'profile_detail' user.id %}">
          <p>{{ post.user.username }}</p>
        </a>
      </div>

      <div class="post-img">
        <a href="{% url 'comments' post.id %}">
          <img src="{{ post.photo_url }}" alt="" />
        </a>
      </div>

      <form action="{% url 'like_post' %}" method= 'POST' class='ui form'>

      {% csrf_token %}
        <input type='hidden' name='post_id' value="{{ post.id }}">
        {% if user not in post.liked.all %}
          <button class="ui button positive" type="submit"> Like</button>
          {%else%}
          <button class="ui button negative" type="submit"> Unlike</button>
          {%endif%}
      </form>
      <strong> {{ post.liked.all.count }} likes </strong> 
      



      <div class="post-likes">

        <div class="post-heart">
          <i class="fa-regular fa-heart"></i>
          <i class="fa-solid fa-heart"></i>
        </div>

        <div class="post-likes-counter">123 likes</div>

        <div class="post-comments">
          <i class="fa-regular fa-comment"></i>
          <i class="fa-solid fa-comment"></i>
        </div>

        <div class="post-comments-counter">123 comments</div>

      </div>

      <div class="post-description">
        <div class="post-author">
          <a class="index-username" href="{% url 'profile_detail' user.id %}">
            <p>@{{ post.user.username }}:</p>
          </a>
        </div>
        <div class="post-description-text">
          <p>{{ post.caption }}</p>
        </div>
        <div class="post-view-comments">
          <a href="{% url 'comments' post.id %}">
            <p>View all comments...</p>
          </a>
        </div>
      </div>
    </div>

    <hr />
{% endfor %} 

{% else %}
<div class="login-splash">
  <h1> Djinstagram</h1>
  <h2> Please <a href="{% url 'login' %}" class="href">Log in</a> or <a href="{% url 'signup' %}">Sign up</a> to join our community</h2>
</div>
{% endif %}

{% endblock %}
